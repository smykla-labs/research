[tools]
python = "3.14"  # Use mise mode (bypasses nix for faster loading)
lefthook = "2.0.13"
ruff = "0.14.10"
shellspec = "0.28.1"
uv = "0.9.18"

[tasks.test]
description = "Run all tests (shellspec + pytest)"
run = "shellspec && .venv/bin/pytest"

[tasks."test:shell"]
description = "Run shellspec tests only"
run = "shellspec"

[tasks."test:python"]
description = "Run pytest tests only"
run = ".venv/bin/pytest"

[tasks."test:python:cov"]
description = "Run pytest with coverage"
run = ".venv/bin/pytest --cov=.claude/skills --cov-report=term-missing"

[tasks."test:watch"]
description = "Run tests for a specific spec file"
run = "shellspec {{arg(name='spec', default='spec/')}}"

[tasks."test:coverage"]
description = "Check test coverage for .claude/ scripts"
run = "bash -c 'source spec/support/script_coverage.sh && check_coverage'"
